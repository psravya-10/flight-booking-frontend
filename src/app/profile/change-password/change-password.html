<div class="change-password-container">
  <!-- Password Expired Popup -->
<div class="popup-overlay" *ngIf="showPopup">
  <div class="popup-box">
    <h3>Password Expired</h3>
    <p>{{ popupMessage }}</p>
    <button (click)="closePopup()">OK</button>
  </div>
</div>

  <form
    class="change-password-card"
    [formGroup]="passwordForm"
    (ngSubmit)="submit()"
  >
  
    <h2>Change Password</h2>

    <div class="form-group">
      <label>Current Password</label>
      <input
        type="password"
        formControlName="oldPassword"
        placeholder="Enter current password"
      />
      <small *ngIf="passwordForm.get('oldPassword')?.touched &&
                    passwordForm.get('oldPassword')?.invalid">
        Current password is required
      </small>
    </div>

    <div class="form-group">
      <label>New Password</label>
      <input
        type="password"
        formControlName="newPassword"
        placeholder="Enter new password"
      />
      <small *ngIf="passwordForm.get('newPassword')?.touched &&
                    passwordForm.get('newPassword')?.invalid">
        Password must be strong (uppercase, lowercase, number, special char)
      </small>
    </div>

    <div class="form-group">
      <label>Confirm Password</label>
      <input
        type="password"
        formControlName="confirmPassword"
        placeholder="Confirm new password"
      />
    </div>
    <p class="error" *ngIf="errorMsg">{{ errorMsg }}</p>

    <p class="success" *ngIf="successMsg">{{ successMsg }}</p>

    <button type="submit" [disabled]="loading">
      {{ loading ? 'Updating...' : 'Change Password' }}
    </button>
  </form>
</div>
