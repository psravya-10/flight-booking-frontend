<div class="page-center">
  <div class="form-card wide">
<form *ngIf="!pnr"
      #bookingForm="ngForm"
      (ngSubmit)="submitBooking(bookingForm)">

  <input type="text"
         name="customerName"
         [(ngModel)]="booking.customerName"
         placeholder="Customer Name"
         required />

  <input type="email"
         name="email"
         [(ngModel)]="booking.email"
         placeholder="Email"
         required />

  <input type="number"
         name="numberOfSeats"
         [(ngModel)]="booking.numberOfSeats"
         (change)="updatePassengers()"
         min="1"
         required />

  <input type="date"
         name="journeyDate"
         [(ngModel)]="booking.journeyDate"
         required />

  <select name="mealPreference"
          [(ngModel)]="booking.mealPreference">
    <option value="VEG">VEG</option>
    <option value="NON_VEG">NON VEG</option>
  </select>

  <hr />

  <h3>Passenger Details</h3>

  <div *ngFor="let p of booking.passengers; let i = index">
       <h3>passenger info</h3>
    <input type="text"
           name="pname{{i}}"
           [(ngModel)]="p.name"
           placeholder="Passenger Name"
           required />

    <select name="pgender{{i}}"
            [(ngModel)]="p.gender"
            required>
      <option value="">Select Gender</option>
      <option value="M">Male</option>
      <option value="F">Female</option>
    </select>

    <input type="number"
           name="page{{i}}"
           [(ngModel)]="p.age"
           placeholder="Age"
           required />
  </div>
<h3>Select Seats</h3>
<div class="legend">
  <span class="available"></span> Available
  <span class="selected"></span> Selected
  <span class="booked"></span> Booked
</div>

<div class="seat-grid">
  <button
    type="button"
    *ngFor="let seat of allSeats"
    class="seat"
    [class.booked]="bookedSeats.includes(seat)"
    [class.selected]="selectedSeats.includes(seat)"
    [disabled]="bookedSeats.includes(seat)"
    (click)="toggleSeat(seat)">
    {{ seat }}
  </button>
</div>

<p class="seat-info">
  Selected {{ selectedSeats.length }} / {{ booking.numberOfSeats }} seats
</p>
  <button
  type="submit"
  [disabled]="
    bookingForm.invalid ||
    selectedSeats.length !== booking.numberOfSeats ||
    isBooking
  ">
  {{ isBooking ? 'Booking...' : 'Confirm Booking' }}
</button>
</form>

<p class="success" *ngIf="pnr">
   Booking Confirmed <br />
  <strong>PNR:</strong> {{ pnr }}
</p>

<p class="error" *ngIf="errorMsg">{{ errorMsg }}</p>
  </div>
   </div>
